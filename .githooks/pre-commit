#!/bin/sh
# Pre-commit hook - lightweight checks (fast feedback, ~2s)
set -e

echo "ðŸ” Quick pre-commit checks..."

# Check go.mod/go.sum are tidy
echo "  â†’ go.mod/go.sum tidy check..."
if ! go mod tidy -diff > /dev/null 2>&1; then
    echo ""
    echo "    âœ— go.mod/go.sum not tidy"
    echo "    Run: go mod tidy && git add go.mod go.sum"
    echo ""
    exit 1
fi
echo "    âœ“ go.mod/go.sum tidy"

# Only fmt and vet for speed
go fmt ./...
echo "  â†’ go fmt..."

go vet ./...
echo "  â†’ go vet..."

echo "âœ… Pre-commit checks passed!"
